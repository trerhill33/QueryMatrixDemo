@page "/query-builder"
@using QueryMatrixDemo.Client.Client.Components.QueryBuilder

<PageTitle>Query Matrix Builder</PageTitle>

<div class="container-fluid">
    <h1>Query Matrix Builder</h1>
    <p class="lead">Build and execute complex queries using the visual query builder.</p>

    <GridStackComponent Column="12" CellHeight="70" Margin="10px">
        <!-- Query Builder Widget -->
        <div class="grid-stack-item" gs-id="queryBuilder" gs-x="0" gs-y="0" gs-w="8" gs-h="4">
            <div class="grid-stack-item-content">
                <QueryBuilderComponent 
                    Title="Build Your Query"
                    OnQueryExecuted="HandleQueryResults" />
            </div>
        </div>

        <!-- Query History Widget -->
        @if (LastQueryResults != null)
        {
                <div class="grid-stack-item" gs-id="queryHistory" gs-x="8" gs-y="0" gs-w="4" gs-h="4">
                    <div class="grid-stack-item-content">
                        <div class="card h-100">
                            <div class="card-header">
                                <h4>Query History</h4>
                            </div>
                            <div class="card-body">
                                <!-- Query history content -->
                            </div>
                        </div>
                    </div>
                </div>
        }
    </GridStackComponent>
</div>

@code {
    private object? LastQueryResults;

    private void HandleQueryResults(object results)
    {
        LastQueryResults = results;
        StateHasChanged();
    }
}
